{
    "name": "ChatMessage",
    "type": "object",
    "properties": {
      "message": {
        "type": "string",
        "description": "The chat message content"
      },
      "sender": {
        "type": "string",
        "enum": [
          "user",
          "assistant"
        ],
        "description": "Who sent the message"
      },
      "query_type": {
        "type": "string",
        "enum": [
          "pathfinding",
          "influence_ranking",
          "recommendations",
          "similarity_search",
          "bridge_finding",
          "general"
        ],
        "description": "Type of query processed"
      },
      "graph_action": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "highlight_path",
              "highlight_nodes",
              "zoom_to",
              "filter_by_topic",
              "show_influence"
            ]
          },
          "node_ids": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "connection_ids": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadata": {
            "type": "object"
          }
        },
        "description": "Graph visualization action to perform"
      },
      "processing_time": {
        "type": "number",
        "description": "Time taken to process query in milliseconds"
      }
    },
    "required": [
      "message",
      "sender"
    ]
  }